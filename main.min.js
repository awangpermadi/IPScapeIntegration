import IpscapeWebClient from"@ipscape/web-client";(function(){function e(e,t){const a={methodName:e,clientVersion:n.version,response:t},o=JSON.parse(JSON.stringify(a));window&&window.top&&window.top.postMessage(o,"*")}const n=new IpscapeWebClient,t="ipscape-qa-test",a="1.0.0";if(!namespaceExists("window.ipscape"))throw new Error("Unable to connect to Ipscape");n.getIntegrationSettings("QA").then(n=>{const t=n.result.config;e("getIntegrationSettings",t)}),n.onAgentLogin(n=>{if(n.error)throw Error(`AGENT:LOGIN: ${JSON.stringify(n.error)}`);e("agentLogin",n)}),n.onAgentLogout(n=>{if(n.error)throw Error(`AGENT:LOGOUT: ${JSON.stringify(n.error)}`);e("agentLogout",n)}),n.onAgentPresenceChange(n=>{e("agentPresenceChange",n)}),n.onCallFailed(n=>{e("callFailed",n)}),n.onCallStarted(n=>{e("callStarted",n)}),n.onCallHangup(n=>{e("callHangup",n)}),n.onCallWrapped(n=>{e("callWrapped",n)}),n.onPreviewAllocated(n=>{e("previewAllocated",n)}),n.onComponentChanged(n=>{e("componentChanged",n)}),n.onInteractionOpen(n=>{e("interactionOpen",n)}),n.onInteractionClosed(n=>{e("interactionClosed",n)}),window.addEventListener("message",t=>{const{payload:a}=t.data;switch(t.data.event){case"clickToDial":n.clickToDial(t.data).then(n=>{e("clickToDial",n)});break;case"isAuthorised":n.isAuthorised().then(n=>{e("isAuthorised",n)});break;case"getAgentDetails":n.getAgentDetails().then(n=>{e("getAgentDetails",n)});break;case"getAgentPresence":n.getAgentPresence().then(n=>{e("getAgentPresence",n)});break;case"getAgentCampaigns":n.getAgentCampaigns().then(n=>{e("getAllocatedCampaigns",n)});break;case"getPauseReasons":n.getPauseReasons().then(n=>{e("getPauseReasons",n)});break;case"getCurrentInteraction":n.getCurrentInteraction().then(n=>{e("getCurrentInteraction",n)});break;case"getInteractionById":n.getInteractionById(JSON.parse(a)).then(n=>{e("getInteractionById",n)});break;case"getIntegrationSettings":n.getIntegrationSettings(a).then(n=>{e("getIntegrationSettings",n)});break;case"inCallComponentOptionAdd":n.addComponentOption(JSON.parse(a)).then(n=>{e("addComponentOption",n)});break;default:console.warn(`QA Integration: unidentified event (${JSON.stringify(t.data)})`)}},!1),console.log(`\n    ===========================================\n      WebClientVersion: ${n.version}\n      Integration: ${t}\n      IntegrationVersion: ${a}\n    ===========================================`)})();